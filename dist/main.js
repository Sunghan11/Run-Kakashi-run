!function(t){var i={};function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)e.d(n,s,function(i){return t[i]}.bind(null,s));return n},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/dist/",e(e.s=2)}([function(t,i){function e(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var n=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.score=0,this.highScore=0}var i,n,s;return i=t,(n=[{key:"drawScore",value:function(t){var i="Score: ".concat(this.score," / ").concat(this.highScore);t.font="16px Arial",t.strokeText(i,640,40),t.fillText(i,640,40),t.fillStyle="orange",t.lineWidth=3,this.countScore(),this.getHighScore()}},{key:"countScore",value:function(){this.score+=1}},{key:"getHighScore",value:function(){return this.score>this.highScore&&(this.highScore=this.score),this.highScore}}])&&e(i.prototype,n),s&&e(i,s),t}();t.exports=n},function(t,i,e){},function(t,i,e){"use strict";e.r(i);e(1);function n(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=.4,o=11,a=55,r=55,h=[0,0,55,55],u=[55,0,55,55],c=[110,0,55,55],l=[165,0,55,55],m=[220,0,55,55],f=[0,55,55,55],d=[55,55,55,55],p=[110,55,55,55],g=[165,55,55,55],v=[220,55,55,55],k=[0,110,55,55],y=[110,110,55,55],b=[165,110,55,55],w=[220,165,55,55],A=[55,110,55,55],j=[110,165,55,55],x=[220,165,55,55],S=[220,220,55,55],C=[0,220,55,55],O=[55,220,55,55],R=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.jumping=!1,this.sliding=!1,this.jumpCount=0,this.slideCount=0,this.sprites=new Image,this.sprites.src="src/images/kakashi2.png",this.runAnimation=0,this.jumpAnimation=0,this.poseAnimation=0,this.slideAnimation=0,this.gameOver=!1,this.x=100,this.y=220}var i,e,R;return i=t,(e=[{key:"jump",value:function(){this.jumping&&(0!==this.jumpCount&&this.onGround()?1!==this.jumpCount||this.onGround()?(this.position[1]=220,this.jumpCount=0,this.jumping=!1):(this.jumpCount=0,this.position[1]-=o-s*this.jumpCount):(this.position[1]-=o-s*this.jumpCount,this.jumpCount+=1))}},{key:"slide",value:function(){this.sliding&&(0===this.slideCount||this.onGround()?(this.position[1]=230,this.slideCount+=1):(this.position[1]=220,this.slideCount=0,this.sliding=!1))}},{key:"onGround",value:function(){return 100===this.position[0]&&this.position[1]>=220}},{key:"toggleJump",value:function(){!0!==this.sliding&&(this.jumping=!0)}},{key:"toggleSlide",value:function(){!0!==this.jumping&&(this.sliding=!0)}},{key:"getFrame",value:function(){return this.gameOver&&this.poseAnimation<10?(this.poseAnimate+=1,C):this.gameOver&&this.poseAnimation<20?(this.poseAnimation+=1,O):this.gameOver&&20===this.poseAnimaton?(this.poseAnimation=0,C):this.sliding&&this.onGround()&&this.slideAnimation<50?(this.slideAnimation+=1,S):this.slideAnimation>=50?(this.sliding=!1,this.position[1]=220,this.slideAnimation=0,h):this.onGround()&&this.runAnimation<5?(this.runAnimation+=1,h):this.onGround()&&this.runAnimation<10?(this.runAnimation+=1,u):this.onGround()&&this.runAnimation<15?(this.runAnimation+=1,c):this.onGround()&&this.runAnimation<20?(this.runAnimation+=1,l):this.onGround()&&this.runAnimation<25?(this.runAnimation+=1,m):this.onGround()&&this.runAnimation<30?(this.runAnimation+=1,f):this.onGround()&&this.runAnimation>=30?(this.runAnimation=0,h):!this.onGround()&&this.jumpAnimation<4?(this.jumpAnimation+=1,d):!this.onGround()&&this.jumpAnimation<8?(this.jumpAnimation+=1,p):!this.onGround()&&this.jumpAnimation<12?(this.jumpAnimation+=1,g):!this.onGround()&&this.jumpAnimation<16?(this.jumpAnimation+=1,v):!this.onGround()&&this.jumpAnimation<20?(this.jumpAnimation+=1,k):!this.onGround()&&this.jumpAnimation<24?(this.jumpAnimation+=1,y):!this.onGround()&&this.jumpAnimation<30?(this.jumpAnimation+=1,b):!this.onGround()&&this.jumpAnimation<36?(this.jumpAnimation+=1,w):!this.onGround()&&this.jumpAnimation<46?(this.jumpAnimation+=1,A):!this.onGround()&&this.jumpAnimation<50?(this.jumpAnimation+=1,j):!this.onGround()&&this.jumpAnimation<54?(this.jumpAnimation+=1,x):!this.onGround()&&this.jumpAnimation>=54?(this.jumpAnimation=0,h):(this.slideAnimation=0,h)}},{key:"draw",value:function(t){t.clearRect(0,0,innerWidth,innerHeight);var i=this.getFrame();t.drawImage(this.sprites,i[0],i[1],i[2],i[3],this.position[0],this.position[1],i[2],i[3])}},{key:"update",value:function(t){this.jump(),this.slide(),this.draw(t)}},{key:"bounds",value:function(){return{left:this.x,right:this.x+a,top:this.y,bottom:this.y+r}}},{key:"collidesWith",value:function(t){var i=this,e=!1;return function(t){return!(t.bounds().left>i.bounds().right||t.bounds().right<i.bounds().left||t.bounds().top<i.bounds().bottom||t.bounds().bottom>i.bounds().top)}(t)&&(e=!0,console.log("hit")),e}}])&&n(i.prototype,e),R&&n(i,R),t}();function G(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var E=4,I=1,P=50,T=function(){function t(i,e,n,s,o){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.image=e,this.speed=o,this.x=0,this.y=n,this.imgWidth=s,this.ctx=i;var a=this.imgWidth+60*I*E;this.rocks=[this.randomRock(a),this.randomRock(a+this.generateRockSpacing()),this.randomRock(a+4*this.generateRockSpacing())]}var i,e,n;return i=t,(e=[{key:"generateRockSpacing",value:function(){return Math.floor(500*Math.random()+150)}},{key:"randomRock",value:function(t){return{left:t,right:P+t,top:200,bottom:100,passed:!1}}},{key:"eachRock",value:function(t){this.rocks.forEach(t.bind(this))}},{key:"passedRock",value:function(t,i){this.eachRock((function(e){e.right<t.left&&(e.passed||(e.passed=!0,i()))}))}},{key:"collidesWith",value:function(t){var i=!1;return this.eachRock((function(e){var n,s;s=t,(n=e).left>s.right||n.right<s.left||n.top<s.bottom||n.bottom>s.top||(i=!0,console.log("hit"))})),i}},{key:"moveRocks",value:function(){if(this.eachRock((function(t){t.left-=E,t.right-=E})),this.rocks[0].right<=0){this.rocks.shift();var t=this.rocks[1].left+this.generateRockSpacing();this.rocks.push(this.randomRock(t))}}},{key:"drawRocks",value:function(){this.eachRock((function(t){this.ctx.fillStyle="grey",this.ctx.strokeStyle="black",this.ctx.fillRect(t.left,t.top,P,t.bottom)}))}},{key:"draw",value:function(){this.ctx.clearRect(0,0,1e3,300),this.ctx.drawImage(this.image,this.x,this.y),this.ctx.drawImage(this.image,this.x+this.imgWidth,this.y),this.imgWidth<1e3&&this.ctx.drawImage(this.image,this.x+2*this.imgWidth,this.y),this.x<=-this.imgWidth&&(this.x=0),this.move()}},{key:"move",value:function(){this.x-=this.speed}}])&&G(i.prototype,e),n&&G(i,n),t}(),W=e(0),M=e.n(W),B=function(t){document.getElementById("play-button").addEventListener("click",(function(i){document.getElementsByClassName("menu")[0].className="menu close",setTimeout((function(){return t.start("play")}),200)}))};function L(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var D=7,F=[0,0,70,40],_=[0,40,70,40],H=[0,80,70,40],J=[0,120,70,40],K=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.fireSprites=new Image,this.fireSprites.src="src/images/fireball.png",this.fireAnimation=0}var i,e,n;return i=t,(e=[{key:"getFrame",value:function(){return this.fireAnimation<5?(this.fireAnimation+=1,F):this.fireAnimation<10?(this.fireAnimation+=1,_):this.fireAnimation<15?(this.fireAnimation+=1,H):this.fireAnimation<20?(this.fireAnimation+=1,J):(this.fireAnimation=0,F)}},{key:"draw",value:function(t){t.beginPath(),console.log("fireballl");var i=this.getFrame();t.drawImage(this.fireSprites,i[0],i[1],i[2],i[3],this.position[0],this.position[1],i[2],i[3])}},{key:"move",value:function(){this.position[0]-=D}},{key:"outside",value:function(){return this.position[0]<-100}},{key:"update",value:function(t){this.draw(t),this.move()}}])&&L(i.prototype,e),n&&L(i,n),t}();function N(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var q=5,U=75,V=75,z=[0,0,75,75],Q=[75,0,75,75],X=[150,0,75,75],Y=function(){function t(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.rocks=new Image,this.rocks.src="src/images/rocks.png",this.num=Math.floor(3*Math.random())+1}var i,e,n;return i=t,(e=[{key:"getRock",value:function(){return 1===this.num?z:2===this.num?Q:X}},{key:"draw",value:function(t){t.beginPath(),console.log("rock");var i=this.getRock();t.drawImage(this.rocks,i[0],i[1],i[2],i[3],this.position[0],this.position[1],i[2],i[3])}},{key:"bounds",value:function(){return{left:this.position[0],right:this.position[0]+U,top:this.position[1],bottom:this.position[1]+V}}},{key:"move",value:function(){this.position[0]-=q}},{key:"update",value:function(t){this.draw(t),this.move()}}])&&N(i.prototype,e),n&&N(i,n),t}();function Z(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var $=function(){function t(i,e,n,s,o){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=i,this.gameCanvas=e,this.kakashi=new R,this.rock=new Y,this.score=new M.a(1),this.jump=this.jump.bind(this),this.slide=this.slide.bind(this),this.draw=this.draw.bind(this),this.background=this.createBackground(n,s,o),this.setButtonListeners(),this.restart=this.restart.bind(this),this.obstacles=[],B(this)}var i,e,n;return i=t,(e=[{key:"jump",value:function(t){"Space"!==t.code&&"KeyW"!==t.code&&"ArrowUp"!==t.code||!this.gamePlaying||(t.preventDefault(),this.kakashi.toggleJump())}},{key:"slide",value:function(t){"ControlLeft"!==t.code&&"KeyS"!==t.code&&"ArrowDown"!==t.code||!this.gamePlaying||(t.preventDefault(),this.kakashi.toggleSlide())}},{key:"setButtonListeners",value:function(){var t=this;this.gameCanvas.addEventListener("keydown",this.jump),this.gameCanvas.addEventListener("keydown",this.slide),this.gameCanvas.addEventListener("keydown",this.restart),this.gameCanvas.addEventListener("keydown",(function(i){"Escape"===i.code&&t.gamePlaying&&i.preventDefault()}))}},{key:"createBackground",value:function(t,i,e){var n=new Image;n.src="src/images/backgroundWater.jpg",this.bg=new T(t,n,-35,1400,1);var s=new Image;s.src="src/images/darkTrees.png",this.tree=new T(i,s,115,400,3);var o=new Image;o.src="src/images/grass.png",this.grass=new T(e,o,263,400,5)}},{key:"generateObstacles",value:function(){this.createFireball(),this.createRock()}},{key:"generateObstaclesSpacing",value:function(){return Math.floor(500*Math.random()+150)}},{key:"eachObstacle",value:function(t){this.obstacles.forEach(t.bind(this))}},{key:"createFireball",value:function(){return this.fireball=null,this.fireball2=null,this.fireball3=null,this.fireball=new K,this.fireball2=new K,this.fireball3=new K,this.fireball.position=[900,190],this.fireball2.position=[900,100],this.fireball3.position=[900,145],0===this.fireball.position[0]&&(this.fireball=null,this.fireball=new K,this.fireball.position=[900,190]),this.obstacles.push("fireball"),this.fireball.position[0]<500&&this.obstacles.shift(),this.fireball}},{key:"createRock",value:function(){this.rock=new Y,this.rock.position=[1100,195]}},{key:"restart",value:function(){this.kakashi.restart(),this.gameOver=!1,this.score=0,this.kakashi=new R,this.rock=new Y,this.fireball=new K,this.background=new T,this.draw()}},{key:"gameOver",value:function(){this.kakashi.collidesWith(this.rock),this.gameStop()}},{key:"gameOverDraw",value:function(){this.ctx.font="48px serif",this.strokeText("GAME OVER",10,50),this.ctx.font="38px serif",this.strokeText("Press 'R' to run again")}},{key:"start",value:function(){document.getElementById("canvas").focus(),this.gamePlaying=!0,this.gameOver=!1,this.score.score=0,this.kakashi.position=[100,220],this.createRock(),this.generateObstacles(),this.canRestart=!1,this.draw()}},{key:"gameStop",value:function(){this.gameOver=!0,this.gameOverDraw(),this.canRestart=!0}},{key:"restartGame",value:function(t){"r"===t.key&&this.canRestart&&(t.preventDefault(),this.start())}},{key:"draw",value:function(){var t=this;if(this.gameOver)alert(this.score),this.restart();else{requestAnimationFrame(this.draw),this.kakashi.update(this.ctx),this.score.drawScore(this.ctx),this.bg.draw(),this.tree.draw(),this.grass.draw(),this.fireball.update(this.ctx),this.fireball2.update(this.ctx),this.fireball3.update(this.ctx),this.rock.update(this.ctx);var i=null;this.obstacles.forEach((obstacle,function(e){!0===obstacle.outside()&&(i=e,console.log("outside")),!0===t.kakashi.collidesWith(t.rock)&&console.log("hit")})),null!==i&&this.obstacles.splice(i,1)}}}])&&Z(i.prototype,e),n&&Z(i,n),t}();document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("canvas"),i=t.getContext("2d"),e=document.getElementById("bg-canvas").getContext("2d"),n=document.getElementById("tree-canvas").getContext("2d"),s=document.getElementById("grass-canvas").getContext("2d");new $(i,t,e,n,s)}))}]);
//# sourceMappingURL=main.js.map